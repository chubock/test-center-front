<div class="form-horizontal well well-sm">
  <div class="text-right">
    <a class="btn no-padding" *ngIf="mode == 'VIEW'"><span class="glyphicon glyphicon-trash"></span></a>
    <a class="btn no-padding" *ngIf="mode == 'VIEW'" (click)="edit()"><span class="glyphicon glyphicon-pencil"></span></a>
    <a class="btn no-padding" *ngIf="mode == 'EDIT'" (click)="cancel()"><span class="glyphicon glyphicon-remove"></span></a>
    <a class="btn no-padding" *ngIf="mode == 'EDIT'"><span class="glyphicon glyphicon-ok"></span></a>
  </div>
  <div class="form-group">
    <label for="questionText" class="control-label" [ngClass]="{'col-sm-3': mode == 'EDIT' || mode == 'VIEW', 'col-sm-1': mode == 'ANSWER' || mode == 'ANSWERED'}">{{mode == 'EDIT' || mode == 'VIEW' ? 'Question :' : number + '-'}}</label>
    <div [ngClass]="{'col-sm-9': mode == 'EDIT' || mode == 'VIEW', 'col-sm-11': mode == 'ANSWER' || mode == 'ANSWERED'}" [class.control-text]="mode != 'EDIT'">
      <textarea name="questionText" [(ngModel)]="question.text" class="form-control" *ngIf="mode == 'EDIT'"></textarea>
      <span *ngIf="mode != 'EDIT'">{{question.text}}</span>
    </div>
  </div>
  <div class="text-center" [ngClass]="{'col-sm-offset-3': mode == 'EDIT' || mode == 'VIEW', 'col-sm-offset-1': mode == 'ANSWER' || mode == 'ANSWERED', 'col-sm-9': mode == 'EDIT' || mode == 'VIEW', 'col-sm-11': mode == 'ANSWER' || mode == 'ANSWERED'}" *ngIf="question.fileId">
    <img width="300" height="200" src="http://localhost:8080/files/{{question.fileId}}">
  </div>
  <div class="form-group">
    <label *ngIf="mode == 'EDIT' || mode == 'VIEW'" class="control-label col-sm-3">Choices :</label>
    <div class="col-sm-9" *ngIf="mode == 'EDIT' && dynamicChoices">
      <button type="button" class="btn btn-default" (click)="question.pushChoice()"><span class="glyphicon glyphicon-plus"></span></button>
      <button type="button" class="btn btn-default" (click)="question.popChoice()" style="float: right;" [disabled]="question.choices.length < 3"><span class="glyphicon glyphicon-minus"></span></button>
    </div>
  </div>
  <div class="form-group" *ngFor="let choice of question.choices; let i = index;">
    <div class="text-right col-xs-1" [ngClass]="{'col-sm-3': mode == 'EDIT' || mode == 'VIEW'}">
      <p-checkbox *ngIf="multipleChoice && (mode == 'EDIT' || mode == 'VIEW')" [(ngModel)]="choice.answer" [binary]="true" [disabled]="mode == 'VIEW' || (question.maxAnswerCount == question.answers.length && !choice.answer)"></p-checkbox>
      <p-checkbox *ngIf="multipleChoice && (mode == 'ANSWER' || mode == 'ANSWERED')" [(ngModel)]="choice.selected" [binary]="true" [disabled]="mode == 'ANSWERED' || (question.maxAnswerCount == question.selects.length && !choice.selected)"></p-checkbox>
      <p-radioButton *ngIf="!multipleChoice && (mode == 'EDIT' || mode == 'VIEW')" value="{{i}}" [(ngModel)]="question.answer" [disabled]="mode == 'VIEW'"></p-radioButton>
      <p-radioButton *ngIf="!multipleChoice && (mode == 'ANSWER' || mode == 'ANSWERED')" value="{{i}}" [(ngModel)]="question.selected" [disabled]="mode == 'ANSWERED'"></p-radioButton>
    </div>
    <div class="col-xs-11" [ngClass]="{'col-sm-9': mode == 'EDIT' || mode == 'VIEW'}">
      <input *ngIf="mode == 'EDIT' && editableChoices" type="text" class="form-control" [(ngModel)]="question.choices[i].text">
      <span [ngClass]="{'text-success': mode == 'ANSWERED' && question.isAnswer(i), 'text-danger': mode == 'ANSWERED' && question.isSelected(i) && !question.isAnswer(i)}" *ngIf="multipleChoice && (mode != 'EDIT' || !editableChoices)">{{question.choices[i].text}}</span>
      <span [ngClass]="{'text-success': mode == 'ANSWERED' && question.answer == i, 'text-danger': mode == 'ANSWERED' && question.selected == i && !question.answer == i}" *ngIf="!multipleChoice && (mode != 'EDIT' || !editableChoices)">{{question.choices[i].text}}</span>
    </div>
  </div>
  <div class="form-group" *ngIf="dynamicMaxAnswerCount && (mode == 'EDIT' || (mode == 'VIEW' && question.maxAnswerCount))">
    <label for="maxAnswerCount" class="control-label" [ngClass]="{'col-sm-3': mode == 'EDIT' || mode == 'VIEW', 'col-sm-1': mode == 'ANSWER' || mode == 'ANSWERED'}">Max Answer: </label>
    <div [ngClass]="{'col-sm-9': mode == 'EDIT' || mode == 'VIEW', 'col-sm-11': mode == 'ANSWER' || mode == 'ANSWERED'}" [class.control-text]="mode != 'EDIT'">
      <select name="maxAnswerCount" [(ngModel)]="question.maxAnswerCount" class="form-control" *ngIf="mode == 'EDIT'">
        <option value=""></option>
        <option *ngFor="let choice of question.choices.slice(0, question.choices.length - 1); let i = index" value="{{i + 1}}">{{i + 1}}</option>
      </select>
      <span *ngIf="mode != 'EDIT'">{{question.maxAnswerCount}}</span>
    </div>
  </div>
</div>


